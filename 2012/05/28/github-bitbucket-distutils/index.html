<!DOCTYPE html>
<html lang="ko">
  <head>
    <meta charset="utf-8">
    
  
    
      <link rel="canonical" href="https://blog.hongminhee.org/2012/05/28/github-bitbucket-distutils/">
      <meta property="og:url" content="https://blog.hongminhee.org/2012/05/28/github-bitbucket-distutils/">
    
  
  
  <meta name="description" value="">
  <meta name="twitter:card" content="summary">
  <meta property="og:locale" content="ko_KR">
  <meta property="og:site_name" content="洪民憙 블로그">
  <meta property="og:type" content="article">
  
    <meta name="twitter:title" content="(github|bitbucket)-distutils">
    <meta property="og:title" content="(github|bitbucket)-distutils">
  
  <meta name="twitter:description" content="StyleShare 만들 때 배포를 신속하게 만들고 싶었지만 실제로는 그렇게 빠르게 되지 않았다. 패키징을 하는데 시간이 가장 많이 들었던 부분은 바로 의존성 해결. 정확히는 PyPI가 그렇게 빠릿하게 응답하지 않아서 모든 패키지를 다운로드하는데 몇분씩 걸리다보니 당장 몇초 안에 배포를 하고 싶은 상황에서 매우 답답했던 기억이 난다. 애초에 pip나 easy_install이 전체 의존성 그래프를 선형화시켜서 하나씩 받는 게 문제라고 보지만, 어쨌든 그랬었다. (해결은 pip에서 제공하는 캐시 옵션을 여러가지 켜서 어느 정도 했지만 여전히 인덱스 속도가 느려서 그 이상으로 시간을 줄이지는 못했다.) …">
  <meta property="og:description" content="StyleShare 만들 때 배포를 신속하게 만들고 싶었지만 실제로는 그렇게 빠르게 되지 않았다. 패키징을 하는데 시간이 가장 많이 들었던 부분은 바로 의존성 해결. 정확히는 PyPI가 그렇게 빠릿하게 응답하지 않아서 모든 패키지를 다운로드하는데 몇분씩 걸리다보니 당장 몇초 안에 배포를 하고 싶은 상황에서 매우 답답했던 기억이 난다. 애초에 pip나 easy_install이 전체 의존성 그래프를 선형화시켜서 하나씩 받는 게 문제라고 보지만, 어쨌든 그랬었다. (해결은 pip에서 제공하는 캐시 옵션을 여러가지 켜서 어느 정도 했지만 여전히 인덱스 속도가 느려서 그 이상으로 시간을 줄이지는 못했다.) …">
  <meta property="og:updated_time"
        content="2012-05-28T02:06:45+09:00">
  
      <title>(github|bitbucket)-distutils &mdash; 洪民憙 블로그</title>
      <link rel="alternate" type="application/atom+xml" title="洪民憙 블로그"
            href="https://blog.hongminhee.org/feed.xml">
      <meta name="author" content="홍민희">
      <link rel="stylesheet" media="screen"
            href="https://blog.hongminhee.org/static/style.css">
      <link rel="stylesheet" type="text/css"
        href="https://spoqa.github.io/spoqa-han-sans/css/SpoqaHanSans-kr.css">
      <link rel="stylesheet" type="text/css"
        href="https://spoqa.github.io/spoqa-han-sans/css/SpoqaHanSans-jp.css">
      <meta name="viewport" content="width=device-width, user-scalable=no">
      <meta name="twitter:creator" content="@hongminhee">
      <meta name="twitter:site" content="@hongminhee">
      <meta property="article:author"
            content="https://www.facebook.com/hongminhee">
    

  </head>
  <body class=" post-page">
    
  
      <header>
        
          <a href="https://blog.hongminhee.org/index.html" class="site-name">
              <ruby>洪民憙 <rp>(</rp><rt>홍민희</rt><rp>)</rp></ruby>
              블로그
            </a>
          <nav>
            <a href="https://hongminhee.org/" rel="author me">본인 소개</a>
            <div class="archive">
              아카이브:
              <ul>
                
                  <li><a href="https://blog.hongminhee.org/2017/">2017</a></li>
                
                  <li><a href="https://blog.hongminhee.org/2016/">2016</a></li>
                
                  <li><a href="https://blog.hongminhee.org/2015/">2015</a></li>
                
                  <li><a href="https://blog.hongminhee.org/2014/">2014</a></li>
                
                  <li><a href="https://blog.hongminhee.org/2013/">2013</a></li>
                
              </ul>
            </div>
          </nav>
        
      </header>

      <ul class="disclaimer">
        <li>글을 썼을 당시의 주장에 제 스스로가 더이상 동의하지 못하는
            경우도 있습니다.</li>
        <li>심지어 몇몇 글은 이제 정 반대의 의견을 가지고 있기도 합니다.</li>
        <li>지금까지 여러 주제에 대한 의견이 꾸준히 달라졌습니다.
            앞으로도 그럴 것입니다.</li>
        <li>따라서 제 생각을 바꾸기 위한 설득도 환영합니다.
            저는 의견을 바꿀 의향이 있습니다.</li>
      </ul>
    

  <article>
    
      <time datetime="2012-05-28T02:06:45+09:00">2012년 5월 28일</time>
    

    
      <h1 id="githubbitbucket-distutils">(github|bitbucket)-distutils</h1>
<p>StyleShare 만들 때 배포를 신속하게 만들고 싶었지만 실제로는 그렇게 빠르게 되지 않았다. 패키징을 하는데 시간이 가장 많이 들었던 부분은 바로 의존성 해결. 정확히는 PyPI가 그렇게 빠릿하게 응답하지 않아서 모든 패키지를 다운로드하는데 몇분씩 걸리다보니 당장 몇초 안에 배포를 하고 싶은 상황에서 매우 답답했던 기억이 난다. 애초에 <code>pip</code>나 <code>easy_install</code>이 <a href="http://www.reddit.com/r/Python/comments/tenmz/how_can_pip_be_improved/c4lzu16">전체 의존성 그래프를 선형화시켜서 하나씩 받는 게</a> 문제라고 보지만, 어쨌든 그랬었다. (해결은 <code>pip</code>에서 제공하는 캐시 옵션을 여러가지 켜서 어느 정도 했지만 여전히 인덱스 속도가 느려서 그 이상으로 시간을 줄이지는 못했다.)</p>
<p>저걸 해결하기 위해서는 아니지만, 그 이후에 패키지 메타데이터를 PyPI에 올리더라도 패키지 파일 자체는 CDN이 물려있는 곳에서 호스팅하는 게 낫겠다는 생각을 계속 해오고 있었는데, 마침 Bitbucket이나 GitHub은 저장소 별로 다운로드 서비스를 제공하고 있고 둘 다 Amazon CloudFront (AWS의 저가형 CDN) 서비스의 가호를 받고 있어서 속도가 서울에서도 꽤나 괜찮게 나왔다. 그래서 패키지 릴리즈할 때 아예 그쪽에 올리게 하는 걸 만들어보자, 하는 아이디어로 최근 두 개의 패키지를 만들어서 올렸다.</p>
<ul>
<li><a href="https://github.com/dahlia/github-distutils">github-distutils</a></li>
<li><a href="https://bitbucket.org/dahlia/bitbucket-distutils">bitbucket-distutils</a></li>
</ul>
<p>참고로 둘 다 PyPI 패키지 명이고, 자기가 배포하려는 패키지의 setup.py 파일 안에 다음과 같이 <code>setup_requires</code>를 명시하면 쓸 수 있다.</p>
<pre><code>setup(
    name=&#39;YourPackageName&#39;,
    version=&#39;1.2.3&#39;,
    ...,
    setup_requires=[&#39;github-distutils &gt;= 0.1.0&#39;]
)</code></pre>
<p>실제로 이걸 써서 릴리즈하면 PyPI 페이지에는 <a href="http://pypi.python.org/pypi/TypeQuery">이렇게</a> 올라가고:</p>
<p><img src="https://i.imgur.com/iRH6y.png" alt="PyPI TypeQuery page" /></p>
<p>저장소 다운로드 페이지에도 <a href="https://bitbucket.org/dahlia/typequery/downloads">이렇게</a> 올라간다:</p>
<p><img src="https://i.imgur.com/HrIdS.png" alt="Bitbucket TypeQuery downloads" /></p>

    
  </article>


    <script>
    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
    (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
    m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

    ga('create', 'UA-54324071-2', 'auto');
    ga('send', 'pageview');
    </script>
  </body>
</html>



