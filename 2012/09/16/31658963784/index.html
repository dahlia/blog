<!DOCTYPE html>
<html lang="ko">
  <head>
    <meta charset="utf-8">
    
  
    
      <link rel="canonical" href="https://blog.hongminhee.org/2012/09/16/31658963784/">
      <meta property="og:url" content="https://blog.hongminhee.org/2012/09/16/31658963784/">
    
  
  
  <meta name="description" value="">
  <meta name="twitter:card" content="summary">
  <meta property="og:locale" content="ko_KR">
  <meta property="og:site_name" content="洪民憙 블로그">
  <meta property="og:type" content="article">
  
    <meta name="twitter:title" content="근황">
    <meta property="og:title" content="근황">
  
  <meta name="twitter:description" content="솔직히 요즘 좀 놀았다. 그래서 의도치 않게 오픈소스로 공개한 것들이 많아졌다. 생각해보니 블로그에 소개도 안한 것들이 태반이라 소개해본다. …">
  <meta property="og:description" content="솔직히 요즘 좀 놀았다. 그래서 의도치 않게 오픈소스로 공개한 것들이 많아졌다. 생각해보니 블로그에 소개도 안한 것들이 태반이라 소개해본다. …">
  <meta property="og:updated_time"
        content="2012-09-16T23:51:00+09:00">
  
      <title>근황 &mdash; 洪民憙 블로그</title>
      <link rel="alternate" type="application/atom+xml" title="洪民憙 블로그"
            href="https://blog.hongminhee.org/feed.xml">
      <meta name="author" content="홍민희">
      <link rel="stylesheet" media="screen"
            href="https://blog.hongminhee.org/static/style.css">
      <link rel="stylesheet" type="text/css"
        href="https://spoqa.github.io/spoqa-han-sans/css/SpoqaHanSans-kr.css">
      <link rel="stylesheet" type="text/css"
        href="https://spoqa.github.io/spoqa-han-sans/css/SpoqaHanSans-jp.css">
      <meta name="viewport" content="width=device-width, user-scalable=no">
      <meta name="twitter:creator" content="@hongminhee">
      <meta name="twitter:site" content="@hongminhee">
      <meta property="article:author"
            content="https://www.facebook.com/hongminhee">
    

  </head>
  <body class=" post-page">
    
  
      <header>
        
          <a href="https://blog.hongminhee.org/index.html" class="site-name">
              <ruby>洪民憙 <rp>(</rp><rt>홍민희</rt><rp>)</rp></ruby>
              블로그
            </a>
          <nav>
            <a href="https://hongminhee.org/" rel="author me">본인 소개</a>
            <div class="archive">
              아카이브:
              <ul>
                
                  <li><a href="https://blog.hongminhee.org/2017/">2017</a></li>
                
                  <li><a href="https://blog.hongminhee.org/2016/">2016</a></li>
                
                  <li><a href="https://blog.hongminhee.org/2015/">2015</a></li>
                
                  <li><a href="https://blog.hongminhee.org/2014/">2014</a></li>
                
                  <li><a href="https://blog.hongminhee.org/2013/">2013</a></li>
                
              </ul>
            </div>
          </nav>
        
      </header>

      <ul class="disclaimer">
        <li>글을 썼을 당시의 주장에 제 스스로가 더이상 동의하지 못하는
            경우도 있습니다.</li>
        <li>심지어 몇몇 글은 이제 정 반대의 의견을 가지고 있기도 합니다.</li>
        <li>지금까지 여러 주제에 대한 의견이 꾸준히 달라졌습니다.
            앞으로도 그럴 것입니다.</li>
        <li>따라서 제 생각을 바꾸기 위한 설득도 환영합니다.
            저는 의견을 바꿀 의향이 있습니다.</li>
      </ul>
    

  <article>
    
      <time datetime="2012-09-16T23:51:00+09:00">2012년 9월 16일</time>
    

    
      <h1 id="근황">근황</h1>
<p>솔직히 요즘 좀 놀았다. 그래서 의도치 않게 오픈소스로 공개한 것들이 많아졌다. 생각해보니 블로그에 소개도 안한 것들이 태반이라 소개해본다.</p>
<h3 id="wand">Wand</h3>
<dl>
<dt>프로젝트 웹사이트</dt>
<dd><a href="http://dahlia.github.com/wand/" class="uri">http://dahlia.github.com/wand/</a>
</dd>
<dt>GitHub (Git 저장소)</dt>
<dd><a href="https://github.com/dahlia/wand" class="uri">https://github.com/dahlia/wand</a>
</dd>
<dt>Travis (Continuous Integration)</dt>
<dd><a href="http://travis-ci.org/dahlia/wand" class="uri">http://travis-ci.org/dahlia/wand</a>
</dd>
<dt>메일링 리스트</dt>
<dd><a href="&#x6d;&#x61;&#x69;&#108;&#116;&#x6f;&#58;&#x77;&#x61;&#110;&#100;&#64;&#108;&#x69;&#98;&#114;&#x65;&#108;&#x69;&#x73;&#116;&#46;&#x63;&#x6f;&#x6d;" class="email">&#x77;&#x61;&#110;&#100;&#64;&#108;&#x69;&#98;&#114;&#x65;&#108;&#x69;&#x73;&#116;&#46;&#x63;&#x6f;&#x6d;</a>
</dd>
<dd><a href="http://librelist.com/browser/wand/" class="uri">http://librelist.com/browser/wand/</a>
</dd>
<dt>PyPI</dt>
<dd><a href="http://pypi.python.org/pypi/Wand" class="uri">http://pypi.python.org/pypi/Wand</a>
</dd>
<dd><code>easy_install Wand</code>
</dd>
<dd><code>pip install Wand</code>
</dd>
</dl>
<p>Python에서 쓰려고 만든 ImageMagick 바인딩으로 시작했는데 지금은 PIL의 대체품 정도로 생각하고 있다. 바인딩이긴 한데 얇은 추상화를 목표로 하는 것은 아니고 일반적인 Python 스타일의 API와 좋은 문서화(중요)를 목표로 하고 있다.</p>
<p>배경을 설명하자면 좀 길다. 원래 Python에는 C로 작성된 유일무이한 이미지 처리 확장 모듈이 있는데 그게 바로 <a href="http://www.pythonware.com/products/pil/">Python Imaging Library</a>이다(이하 PIL). 근데 문제는 이게 관리가 안된지 너무 오래된 데다가 Python 1.x 시절 스타일로 추상화가 되어 있다는 거다. 뉴 스타일 클래스는 커녕 올드 스타일 클래스도 안 쓰고 그냥 모듈이 곧 클래스… 자세한 설명은 생략한다. 게다가 PyPy가 나름대로 <a href="http://morepypy.blogspot.com/2010/04/using-cpython-extension-modules-with.html">cpyext</a>를 제공하고 또 CPython C API 호환성도 쓸만하지만 어찌됐건 PIL은 그 당시에 빌드가 안됐다. 참고로 지금은 누가 빡쳐서 PIL을 포크하여 <a href="http://pypi.python.org/pypi/Pillow">Pillow</a>라는 이름으로 패키지를 관리하고 있는데 낡은 걸 열심히 보수하는 형국이라…</p>
<p>당시 나는 크롭이랑 리사이즈만 하면 됐기 때문에 간단히 <a href="http://docs.python.org/library/ctypes.html">ctypes</a>를 써서 ImageMagick C API를 호출하기로 했다. 근데 바퀴를 재발명하면 안되니까 분명 다른 누군가도 ImageMagick 바인딩을 PyPy에서도 쓸 수 있게 만들어놨을 거라는 생각을 했다. 하지만 찾아봤더니 있긴 몇개 있는데 다들 몇가지 조건을 만족하지 못했다.</p>
<ul>
<li>PyPy에서 쓰려면 cpyext로 빌드가 되거나 ctypes로 엮어야 하는데(참고로 PyPy는 후자가 더 빠르다!) 이걸 만족 못하거나</li>
<li>일단 대부분 문서화가 개판 5분 전이었고</li>
<li>결정적으로 나는 <a href="http://packages.python.org/distribute/">distribute</a>로 의존성 관리를 하고 싶은데 <a href="http://pypi.python.org/">PyPI</a>에 등록은 커녕 패키징도 안되어있는 것들이 태반</li>
<li>마지막으로 PyPy은 CPython과 달리 참조 카운팅을 하는 대신 가비지 컬렉션을 하니까 소멸자 호출 시점이 결정 불가능한데 여기에 의존해서 리소스 해제 처리를 해둔 것들이 대부분</li>
</ul>
<p>하여간 죄다 빡치게 만들어서 그냥 새로 만들기 시작한게 Wand다. 마법봉 로고는 여자친구가 그려줬다. 목표는 위에서 빡치게 했던 것들을 모두 만족하는 것이다:</p>
<ul>
<li>CPython/PyPy 양쪽에서 잘 돌아야 함. (마일스톤에 Jython 2.7 릴리즈에 맞춰서 호환성 추가하는 것도 있긴 한데 Jython 메인테이너가 혼자라 거기도 힘들듯… ctypes 호환성 맞춰줘야함. 필요한 패치는 보내서 리뷰하고 문제 없으면 받아들여줄지도…)</li>
<li>문서화. 잘좀 하자…</li>
<li>21세기인데 <code>pip install Wand</code>로 설치 가능해야지</li>
<li>Wand는 Python 2.5에 추가된 <code>with</code>문(<a href="http://en.wikipedia.org/wiki/Resource_Acquisition_Is_Initialization">RAII</a>)으로 편하면서도 명시적으로 리소스 관리를 한다</li>
</ul>
<p>딱 1년 정도 관리했고 슬슬 쓰는 사람들도 많아지는 모양이다. 심지어 요즘에는 나보다 다른 사람들이 추가한 기능이 훨씬 많다.</p>
<p><a href="http://www.freshports.org/graphics/py-wand/">최근에 FreeBSD에 패키징되어 들어갔다.</a></p>
<h3 id="libsass-python">libsass-python</h3>
<dl>
<dt>프로젝트 웹사이트</dt>
<dd><a href="http://dahlia.github.com/libsass-python/" class="uri">http://dahlia.github.com/libsass-python/</a>
</dd>
<dt>GitHub (Git 저장소)</dt>
<dd><a href="https://github.com/dahlia/libsass-python" class="uri">https://github.com/dahlia/libsass-python</a>
</dd>
<dt>Travis (Continuous Integration)</dt>
<dd><a href="http://travis-ci.org/dahlia/libsass-python" class="uri">http://travis-ci.org/dahlia/libsass-python</a>
</dd>
<dt>PyPI</dt>
<dd><a href="http://pypi.python.org/pypi/libsass" class="uri">http://pypi.python.org/pypi/libsass</a>
</dd>
<dd><code>easy_install libsass</code>
</dd>
<dd><code>pip install libsass</code>
</dd>
</dl>
<p>전에 <a href="https://blog.hongminhee.org/2012/07/28/libsass/">libsass 관련 포스팅</a>을 한 적 있는데, 원래 있던 기존 바인딩의 빌드 스크립트가 구렸다. libsass 자체는 따로 <code>make</code>를 돌린 다음에 <code>setup.py install</code>을 하게 되어 있는데… 당연하지만 이렇게 해두면 <code>easy_install</code>로 설치가 안된다. 패치를 2번인가 보냈고 잘 받아주긴 했는데 가만 보니 성능이 중요한 것도 아니고 Windows를 생각하면 그냥 바이너리 egg까지 배포하는 게 맞겠다 싶은 생각이 들었다. 그래서 ctypes 쓰지 않고 이번에는 Wand와 반대로 CPython C API를 써서 확장을 만들었다. 그래도 cpyext와 호환되기 때문에 PyPy에서도 잘 돌아간다. 오랜만에 C 코딩을 했는데 역시 C는 ‘생각보다 나쁘지 않았어’라고 생각하려는 순간 날 짜증나게 만들더라. C에 <code>goto</code>는 꼭 있어야 한다. ㅠㅠ</p>
<p>결국 첫번째 목표는 SASS/SCSS 컴파일을 하는 거였고 잘 되서 첫번째 릴리즈를 했다. 두번째 목표는 <a href="http://packages.python.org/distribute/">distribute</a>/<a href="http://docs.python.org/library/distutils.html">distutils</a> 지원 및 WSGI 지원이었는데 그것도 구현을 잘 해서 두번째 릴리즈도 했다. 그 뒤에 Windows 호환성 등을 해결해서 마이너 릴리즈를 한두번 더 했다. Windows는 아예 빌드가 되어 있는 바이너리 egg를 함께 배포하고 있다.</p>
<p>(<a href="http://haml.info/">Haml</a>의 창시자이기도 한) Hampton Catlin이 libsass-python 소개 트윗을 해주기도 했다.</p>
<blockquote class="twitter-tweet"><p>Wow! Finally. Sass in Python! Love it! <a href="http://t.co/RoqJ879u" title="http://dahlia.kr/libsass-python/">dahlia.kr/libsass-python/</a></p>&mdash; Hampton Catlin (@hcatlin) <a href="https://twitter.com/hcatlin/status/239482732957278209" data-datetime="2012-08-25T22:01:47+00:00">August 25, 2012</a></blockquote>
<script src="//platform.twitter.com/widgets.js" charset="utf-8"></script>
<h3 id="sider">Sider</h3>
<dl>
<dt>프로젝트 웹사이트</dt>
<dd><a href="http://sider.dahlia.kr/" class="uri">http://sider.dahlia.kr/</a>
</dd>
<dt>GitHub (Git 저장소)</dt>
<dd><a href="https://github.com/dahlia/sider" class="uri">https://github.com/dahlia/sider</a>
</dd>
<dt>Travis (Continuous Integration)</dt>
<dd><a href="http://travis-ci.org/dahlia/sider" class="uri">http://travis-ci.org/dahlia/sider</a>
</dd>
<dt>PyPI</dt>
<dd><a href="http://pypi.python.org/pypi/Sider" class="uri">http://pypi.python.org/pypi/Sider</a>
</dd>
<dd><code>easy_install Sider</code>
</dd>
<dd><code>pip install Sider</code>
</dd>
</dl>
<p>Redis의 고수준 추상화를 목표로 한 라이브러리이다. 올해 초에 어디 쓰려고 만들다가 필요 없어져서 손 놓고 있는 상태. 기본적인 아이디어는 Python의 빌트인 자료구조 인터페이스를 흉내내는 Redis 영속 객체를 만들자는 것이었다. 이를테면 <code>set</code>이나 <code>dict</code>는 Redis에도 있는 set, hash 연산으로 구현할 수 있다.</p>
<p>그냥 설명만 봐서는 잘 감이 안 잡히므로 <a href="http://sider.dahlia.kr/en/latest/sider/ext/wsgi_referer_stat.html">예제 튜토리얼</a>을 읽어보길 바란다.</p>
<p>궁극적인 목표는 (관계형 데이터베이스가 아니니 용어는 부적절하지만 굳이 비교하자면) ORM 수준까지 제공하는 것인데 지금은 상당히 동기를 잃어버린 상태라 나중에 정말 심심해지면 그때나 다시 잡을 것 같다. 그래도 일단 지금 있는 것만 해도 쓸 구석은 꽤 있다.</p>
<h3 id="okydoky">Okydoky</h3>
<dl>
<dt>PyPI</dt>
<dd><a href="http://pypi.python.org/pypi/Okydoky" class="uri">http://pypi.python.org/pypi/Okydoky</a>
</dd>
<dd><code>easy_install Okydoky</code>
</dd>
<dd><code>pip install Okydoky</code>
</dd>
<dt>GitHub (Git 저장소)</dt>
<dd><a href="https://github.com/crosspop/okydoky" class="uri">https://github.com/crosspop/okydoky</a>
</dd>
</dl>
<p><a href="http://readthedocs.org/">RTD</a>의 비공개 프로젝트용 미니 클론이다. <a href="http://sphinx.pocoo.org/">Sphinx</a>(검색엔진 아님)로 문서화된 프로젝트를 GitHub으로부터 커밋 훅을 받아 자동으로 최신 버전으로 빌드해주는 간단한 웹 애플리케이션이다. 정확히는 매 리비전의 문서는 영원히 유지되게 해놨다. 인증은 GitHub으로 하게 되어 있다. 지정된 저장소에 접근 가능한 사람만 볼 수 있다.</p>

    
  </article>


    <script>
    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
    (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
    m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

    ga('create', 'UA-54324071-2', 'auto');
    ga('send', 'pageview');
    </script>
  </body>
</html>



